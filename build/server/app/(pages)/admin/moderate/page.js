(()=>{var e={};e.id=209,e.ids=[209],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},1576:e=>{"use strict";e.exports=require("string_decoder")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4920:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>p,routeModule:()=>x,tree:()=>d});var r=s(3137),a=s(4647),o=s(4183),i=s.n(o),l=s(1775),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);s.d(t,n);let c=r.AppPageRouteModule,d=["",{children:["(pages)",{children:["admin",{children:["moderate",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7294)),"/Users/gauravmehla/Documents/code/4495/the-final-one/src/app/(pages)/admin/moderate/page.tsx"]}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,1918,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,9197)),"/Users/gauravmehla/Documents/code/4495/the-final-one/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,1918,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],p=["/Users/gauravmehla/Documents/code/4495/the-final-one/src/app/(pages)/admin/moderate/page.tsx"],u="/(pages)/admin/moderate/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new c({definition:{kind:a.x.APP_PAGE,page:"/(pages)/admin/moderate/page",pathname:"/admin/moderate",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6990:(e,t,s)=>{Promise.resolve().then(s.bind(s,2269))},2269:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>page});var r=s(80),a=s(7114),o=s(6748),i=s(9885),l=s(1522),n=s(6876);let Posts_ReportedPosts=()=>{let{user:e,isAdmin:t}=(0,o._)(),[s,a]=(0,i.useState)([]),[c,d]=(0,i.useState)(Array(s.length).fill(0));(0,i.useEffect)(()=>{let fetchReportedPosts=async()=>{if(e){let e=(0,l.IO)((0,l.hJ)(n.db,"reportedPosts"));try{let t=await (0,l.PL)(e);if(t.empty)console.log("No posts found for the user");else{console.log("Total posts",t.docs.length);let e=[];t.forEach(t=>{let s=t.data();e.push(s)}),console.log({postsData:e}),a(e),d(Array(e.length).fill(0))}}catch(e){console.log("Error fetching user posts:",e)}}else console.log("Waiting for user")};fetchReportedPosts()},[e]);let nextImage=e=>{d(t=>{let r=[...t];return r[e]=(r[e]+1)%(s[e]?.postDetails.images?.length||1),r})},prevImage=e=>{d(t=>{let r=[...t];return r[e]=(r[e]-1+(s[e]?.postDetails.images?.length||1))%(s[e]?.postDetails.images?.length||1),r})},handleDelete=async e=>{if(console.log("Deleting post with ID:",e),window.confirm("Are you sure you want to delete this post?"))try{let t=(0,l.IO)((0,l.hJ)(n.db,"posts"),(0,l.ar)("postId","==",e)),s=(0,l.IO)((0,l.hJ)(n.db,"reportedPosts"),(0,l.ar)("postDetails.postId","==",e)),r=await (0,l.PL)(t),o=await (0,l.PL)(s);if(o.empty||await (0,l.oe)(o.docs[0].ref),r.empty)console.error("Document does not exist");else{let t=r.docs[0],s=t.data(),a=(0,l.JU)(n.db,"deletedPosts",e);await (0,l.pl)(a,s),await (0,l.oe)(t.ref)}a(t=>{let s=t.filter(t=>t.postDetails.postId!==e);return s})}catch(e){console.error("Error deleting document: ",e)}},handleIgnore=async e=>{if(console.log("Deleting post with ID:",e),window.confirm("Are you sure you want to ignore this post?"))try{let t=(0,l.IO)((0,l.hJ)(n.db,"reportedPosts"),(0,l.ar)("postDetails.postId","==",e)),s=await (0,l.PL)(t);s.empty||await (0,l.oe)(s.docs[0].ref),a(t=>{let s=t.filter(t=>t.postDetails.postId!==e);return s})}catch(e){console.error("Error deleting document: ",e)}};return r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-black mx-auto max-w-screen-lg px-8 pt-5 pb-3",children:0===s.length?r.jsx("p",{className:"text-center text-gray-500",children:"No reported posts available"}):s.map((e,t)=>(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-md overflow-hidden relative",children:[e.postDetails.images&&e.postDetails.images.length>0&&(0,r.jsxs)("div",{className:"relative",children:[r.jsx("img",{className:"w-full h-60 object-cover rounded-t-md",src:e.postDetails.images[c[t]],alt:`Image ${c[t]}`}),e.postDetails.images.length>1&&(0,r.jsxs)("div",{className:"absolute top-0 right-0 flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>prevImage(t),className:"bg-gray-200 text-gray-700 p-2",children:"<"}),r.jsx("button",{onClick:()=>nextImage(t),className:"bg-gray-200 text-gray-700 p-2",children:">"})]})]}),(0,r.jsxs)("div",{className:"p-4",children:[r.jsx("h1",{className:"text-xl font-semibold mb-2 text-gray-900",children:e.postDetails.title}),r.jsx("p",{className:"text-gray-700 mb-4",children:e.postDetails.description}),(0,r.jsxs)("div",{className:"flex items-center text-gray-600",children:[r.jsx("svg",{height:"15pt",viewBox:"0 0 24 24",width:"15pt",xmlns:"http://www.w3.org/2000/svg",fill:"#000000",children:r.jsx("path",{d:"M18,4.48a8.45,8.45,0,0,0-12,12l5.27,5.28a1,1,0,0,0,1.42,0L18,16.43A8.45,8.45,0,0,0,18,4.48ZM16.57,15,12,19.59,7.43,15a6.46,6.46,0,1,1,9.14,0ZM9,7.41a4.32,4.32,0,0,0,0,6.1,4.31,4.31,0,0,0,7.36-3,4.24,4.24,0,0,0-1.26-3.05A4.3,4.3,0,0,0,9,7.41Zm4.69,4.68a2.33,2.33,0,1,1,.67-1.63A2.33,2.33,0,0,1,13.64,12.09Z"})}),r.jsx("p",{className:"ml-2 text-sm",children:e.postDetails.location})]}),(0,r.jsxs)("p",{className:"text-green-900 font-semibold text-lg mt-4",children:["$",e.postDetails.price]}),(0,r.jsxs)("div",{className:"pl-2",children:[r.jsx("h2",{className:"text-gray-900 font-semibold",children:"Reasons"}),r.jsx("div",{className:"bg-gray-200 rounded-md p-3",children:Array.isArray(e.reason)&&e.reason.length>0?r.jsx("ol",{className:"pl-5 text-gray-700 list-decimal",children:e.reason.map((e,t)=>r.jsx("li",{children:e},t))}):r.jsx("p",{children:"No reasons available"})})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2 mt-2",children:[r.jsx("button",{onClick:()=>e.postDetails.postId&&handleDelete(e.postDetails.postId),type:"button",className:"text-white-400 bg-red-600 hover:bg-gray-200 hover:text-gray-900 rounded-sm text-sm p-2 inline-flex items-center justify-center w-full",children:r.jsx("span",{title:"Delete this post",children:"Delete"})}),r.jsx("button",{onClick:()=>handleIgnore(e.postDetails.postId),type:"button",className:"text-white-400 bg-green-600 hover:bg-gray-200 hover:text-gray-900 rounded-sm text-sm p-2 inline-flex items-center justify-center w-full",children:r.jsx("span",{title:"Ignore this post",children:"Ignore"})})]})]})]},t))})},page=()=>{let{user:e}=(0,o._)();return(0,a.useRouter)(),r.jsx("div",{className:"flex flex-1 items-center justify-center p-6",children:r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"p-4",children:r.jsx(Posts_ReportedPosts,{})})})})}},7294:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>o,default:()=>n});var r=s(7536);let a=(0,r.createProxy)(String.raw`/Users/gauravmehla/Documents/code/4495/the-final-one/src/app/(pages)/admin/moderate/page.tsx`),{__esModule:o,$$typeof:i}=a,l=a.default,n=l},3881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var r=s(6885);let __WEBPACK_DEFAULT_EXPORT__=e=>{let t=(0,r.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[997,885,373],()=>__webpack_exec__(4920));module.exports=s})();